<!DOCTYPE html>
<html>

<head>
  <title>Bouncing Balls</title>
  <meta charset="utf-8" />
  <link href="css/balls.css" rel="stylesheet" />
  <script>
  
var canvas
var ctx
var time


// Model
var scene = []

// View
function draw() {
  // Clear canvas
  ctx.fillStyle = "white"
 // ctx.fillRect(0, 0, canvas.width, canvas.height)
var img = document.getElementById("crowd");
ctx.drawImage(img,0,0,1000,400);
var img = document.getElementById("pointer");
ctx.drawImage(img,400,50,50,50);
  // Render all objects in scene
  for (i in scene) {
    scene[i].draw()
  }
}

// Controller
function move(dt) {
  for (var i in scene) {
    scene[i].move(dt)
  }
}

// Main loop
function step() {
  console.log("Step")

  // Get time delta
  var now = Date.now()
  var dt = (now - time) / 100
  time = now

  move(dt)
  draw()

  requestAnimationFrame(step)
}



// Initialization
window.onload = function() {
  // Set up canvas for 2D rendering
  canvas = document.getElementById("canvas");
  ctx = canvas.getContext("2d");


  // Create 5 balls
  for (i = 0; i < 5; i++) {
    scene.push(new Ball())
  }
   time = Date.now()
  requestAnimationFrame(step)
  var img = document.getElementById("crowd");
ctx.drawImage(img,0,0,1000,400);
}

//background.onload = function(){
  
//}
// JavaScript ES6 class
// You might need to use an up to date browser

class Ball {
  // Initialization
  constructor() {
    this.image = document.getElementById("virus")

    this.x = Math.random() * canvas.width
    this.y = Math.random() * canvas.height
    this.dx = Math.random() * 50 - 25
    this.dy = Math.random() * 50 - 25
    this.size = Math.random() + .3
    this.rotation = 0
  }

  // Movement logic
  move(dt) {
     if (this.x > canvas.width) {
      this.x = canvas.width
      this.dx = -Math.abs(this.dx)
    }
    if (this.x < 0) {
      this.x = 0
      this.dx = Math.abs(this.dx)
    }
    if (this.y > canvas.height) {
      this.y = canvas.height
      this.dy = -Math.abs(this.dy)
    }
    if (this.y < 0) {
      this.y = 0
      this.dy = Math.abs(this.dy) * 0.95
    }

    // Movement
    this.x += this.dx * dt
    this.y += 0 * dt
	this.rotation +=dt/3
  }

  // Render self
  draw() {
    ctx.save()
    ctx.translate(this.x, this.y)
    ctx.rotate(this.rotation)
    ctx.scale(this.size, this.size)
    ctx.drawImage(this.image, -20, -20, 40, 40)
    ctx.restore()
  }
}



  </script>
 
</head>

<body>
<b>
 <font color="red">Fight corona</font>
 </b>
  <p>
    <canvas id="canvas" height="400" width="1000">No Canvas :(</canvas>
  </p>
  <img id="image" src="img/ball.png" hidden="true" />
  <img id="virus" src="img/virus.png" hidden="true" />
   <img id="pointer" src="img/pointer2.png" hidden="true" />
     <img id="crowd" src="img/crowd.png" hidden="true" />
</body>

</html>
