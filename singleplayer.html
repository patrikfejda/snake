<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>SNAKE</title>
	<link rel="stylesheet" href="style.css">

</head>

<body>
	<h1 class="gameTitle">SNAKE</h1>
	<canvas id="canvas" width="1240" height="640"></canvas>



	<script>

		// canvas
		const canvas = document.querySelector("canvas");
		const title = document.querySelector("h1");
		const ctx = canvas.getContext("2d");

		// game
		let gameIsRunning = true;

		const fps = 15;
		const tileSize = 40;
		const tileCountX = canvas.width / tileSize;
		const tileCountY = canvas.height / tileSize;

		let score = 0;

		function drawStuff() {
			// background
			// rectangle("#ffbf00", 0, 0, canvas.width, canvas.height);

			// grid
			drawGrid();
		}

		// draw rectangle
		function rectangle(color, x, y, width, height) {
			ctx.fillStyle = color;
			ctx.fillRect(x, y, width, height);
		}

		// randomize food position
		function resetFood() {
			// GAME OVER (nowhere to go)
			if (snakeLength === tileCountX * tileCountY) {
				gameOver();
			}

			foodPosX = Math.floor(Math.random() * tileCountX) * tileSize;
			foodPosY = Math.floor(Math.random() * tileCountY) * tileSize;

			// dont spawn food on snakes head
			if (foodPosX === snakePosX && foodPosY === snakePosY) {
				resetFood();
			}

			// dont spawn food on any snake part
			if (
				tail.some(
					(snakePart) => snakePart.x === foodPosX && snakePart.y === foodPosY
				)
			) {
				resetFood();
			}
		}

		/**
		 * KEYBOARD
		 */
		function keyPush(event) {
			switch (event.key) {
				case "ArrowLeft":
					if (velocityX !== 1) {
						velocityX = -1;
						velocityY = 0;
					}
					break;
				case "ArrowUp":
					if (velocityY !== 1) {
						velocityX = 0;
						velocityY = -1;
					}
					break;
				case "ArrowRight":
					if (velocityX !== -1) {
						velocityX = 1;
						velocityY = 0;
					}
					break;
				case "ArrowDown":
					if (velocityY !== -1) {
						velocityX = 0;
						velocityY = 1;
					}
					break;
				default:
					// restart game
					if (!gameIsRunning) location.reload();
					break;
			}
		}

		// grid
		function drawGrid() {
			for (let i = 0; i < tileCountX; i++) {
				for (let j = 0; j < tileCountY; j++) {
					rectangle(
						"#ffff01",
						tileSize * i,
						tileSize * j,
						tileSize - 1,
						tileSize - 1
					);
				}
			}
		}


		drawStuff();
	</script>
</body>

</html>