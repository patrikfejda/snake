<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>SNAKE</title>
	<link rel="stylesheet" href="css/style.css">

</head>

<body>
	<h1 class="gameTitle">SNAKE</h1>
	<canvas id="canvas" width="1240" height="640"></canvas>


	<script>
		document.addEventListener("keydown", keyPush);

		function keyPush(event) {
			switch (event.key) {
				case "ArrowLeft":
					alert("LEFT");
					break;
				case "ArrowUp":
					alert("UP");
					break;
				case "ArrowRight":
					alert("RIGHT");
					break;
				case "ArrowDown":
					alert("DOWN");
					break;
				default:
					// restart game
					if (!gameIsRunning) location.reload();
					break;
			}
		}


		// canvas
		const canvas = document.getElementById("canvas");
		const ctx = canvas.getContext("2d");

		// game
		const tileSize = 40;
		const tileCountX = canvas.width / tileSize;
		const tileCountY = canvas.height / tileSize;
		console.log("Tiles X: " + tileCountX + " Tiles Y: " + tileCountY)
		const gridLineSize = 01;
		const snakeSpeed = 10; // Part of tile
		const startingPositionX = 440;
		const startingPositionY = 440;

		let velocityX = 1;
		let velocityY = 0;




		class Snake {
			constructor(playerName, color, positionX, positionY) {
				this.playerName = playerName;
				this.color = color;
				this.positionX = positionX;
				this.positionY = positionY;

			}
			drawHead() {
				ctx.fillStyle = "#000";
				ctx.fillRect(
					this.positionX,
					this.positionY,
					tileSize - gridLineSize,
					tileSize - gridLineSize);
			}
		}

		let Snake1 = new Snake("Player 1", "black", startingPositionX, startingPositionY);

		function drawCanvasBackgroundTileGrid() {
			for (let line = 0; line < tileCountY; line++) {
				for (let row = 0; row < tileCountX; row++) {
					// ctx.fillStyle = "#ffff01";
					ctx.fillStyle = "#ffff01";
					ctx.fillRect(
						tileSize * row,
						tileSize * line,
						tileSize - gridLineSize,
						tileSize - gridLineSize);
				}
			}
		}




		//////////////	
		// GAMELOOP
		//////////////	
		setInterval(onTimerTick, 33);

		function onTimerTick() {
			drawCanvasBackgroundTileGrid();
			Snake1.drawHead();

			//RANDOM POHYB
			Snake1.positionX -= 1.5 * snakeSpeed;
			Snake1.positionY -= 0.78 * snakeSpeed;

			// Snake1.positionX += snakeSpeed * velocityX;
			// Snake1.positionY += snakeSpeed * velocityY;


			//////////////	
			// IF SNAKE OUT => BACK TO CANVAS
			//////////////	

			if (Snake1.positionX > canvas.width) {
				Snake1.positionX = 0;
			}
			if (Snake1.positionX < 0) {
				Snake1.positionX = canvas.width;
			}
			if (Snake1.positionY > canvas.height) {
				Snake1.positionY = 0;
			}
			if (Snake1.positionY < 0) {
				Snake1.positionY = canvas.height;
			}
		}

	</script>
</body>

</html>